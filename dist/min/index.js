"use strict";const e={debounce(e,t,s=!0){let u;const r=[];return function(...n){return new Promise(i=>{s?r[0]=i:r.push(i),clearTimeout(u),u=setTimeout(()=>{u=void 0;const t=e(...n);Promise.resolve(t).then(e=>{r.forEach(t=>t(e)),r.length=0})},t)})}},onceAtATime(e,t=new Error("Function is already running")){let s=!1;return async function(...u){if(s)return Promise.reject(t);s=!0;try{return await e(...u)}finally{s=!1}}},throttle(e,t){let s=0;return function(...u){const r=Date.now();if(r-s>=t){s=r;try{e(...u)}catch(e){console.error("Throttled function error:",e)}}}}};class t{constructor(){this.activeCount=0,this.concurrency=1}_canRunProcess(){return this.activeCount<this.concurrency}async _runProcess(e){const{task:t,resolve:s,reject:u}=e;this.activeCount++;try{s(await t())}catch(e){u(e)}finally{this.activeCount--,this._processQueue()}}_processQueue(){Promise.resolve().then(()=>{for(;this._canRunProcess();){const e=this._getQueue();if(!e)break;this._runProcess(e)}})}getActiveCount(){return this.activeCount}}class s extends t{constructor(){super(),this.queues=[]}_getQueue(){return this.queues.shift()}add(e){return new Promise((t,s)=>{this.queues.push({task:e,resolve:t,reject:s}),this._processQueue()})}clear(){this.queues.length=0}size(){return this.queues.length}}var u={mixins:e,Queue:s,QueueParallel:class extends s{constructor(e=2){super(),this.concurrency=e}},QueuePriority:class extends t{constructor(){super(...arguments),this.queues={high:[],normal:[],low:[]}}_getQueue(){return this.queues.high.length?this.queues.high.shift():this.queues.normal.length?this.queues.normal.shift():this.queues.low.length?this.queues.low.shift():void 0}add(e,t="normal"){return new Promise((s,u)=>{t in this.queues||(console.error(`Invalid priority: ${t}`),t="normal"),this.queues[t].push({task:e,resolve:s,reject:u}),this._processQueue()})}clear(e){e?this.queues[e].length=0:(this.queues.high.length=0,this.queues.normal.length=0,this.queues.low.length=0)}size(e){return e?this.queues[e].length:this.queues.high.length+this.queues.normal.length+this.queues.low.length}}};module.exports=u;
//# sourceMappingURL=index.js.map
